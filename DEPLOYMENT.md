# 快速部署指南

## 一、准备工作

### 1. 注册小程序账号
- 访问 [微信公众平台](https://mp.weixin.qq.com/)
- 注册小程序账号（需要企业或个人认证）
- 获取 AppID

### 2. 安装开发工具
- 下载并安装 [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)

## 二、项目配置

### 1. 修改项目配置

**修改 `project.config.json`**
```json
{
  "appid": "你的小程序AppID"
}
```

**修改 `app.js`**
```javascript
wx.cloud.init({
  env: '你的云环境ID', // 需要先开通云开发获取
  traceUser: true,
});
```

### 2. 开通云开发

1. 在微信开发者工具中打开项目
2. 点击工具栏的"云开发"按钮
3. 开通云开发服务（需要实名认证）
4. 创建云环境（选择基础版即可，免费）
5. 在云开发控制台 → 设置 → 环境设置中获取环境ID
6. 将环境ID填入 `app.js` 的 `env` 字段

### 3. 配置数据库

1. 在云开发控制台 → 数据库 → 创建集合
2. 集合名称：`homework`
3. 权限设置：建议选择"所有用户可读，仅创建者可写"

### 4. 配置云存储

1. 在云开发控制台 → 存储 → 权限设置
2. 建议设置为"所有用户可读，仅创建者可写"

### 5. 添加图片资源

在 `images/` 目录下添加以下图标（或使用占位图片）：
- `home.png` / `home-active.png` (81px × 81px)
- `publish.png` / `publish-active.png` (81px × 81px)
- `empty.png` (200px × 200px)

## 三、测试运行

### 1. 编译项目
- 在微信开发者工具中点击"编译"按钮
- 检查控制台是否有错误

### 2. 功能测试

**发布作业测试：**
1. 点击"发布作业"标签
2. 填写标题、选择学科、输入内容
3. 尝试上传视频或音频文件
4. 点击"发布作业"提交

**查看作业测试：**
1. 在首页查看作业列表
2. 使用学科筛选功能
3. 点击作业卡片查看详情
4. 测试视频和音频播放

**删除作业测试：**
1. 在首页点击"删除"按钮
2. 确认删除操作

### 3. 真机测试

1. 点击"预览"按钮生成二维码
2. 使用微信扫码在手机上测试
3. 注意：文件上传等功能需要在真机上测试

## 四、发布上线

### 1. 上传代码
- 在微信开发者工具中点击"上传"
- 填写版本号和项目备注

### 2. 提交审核
- 登录 [微信公众平台](https://mp.weixin.qq.com/)
- 在"版本管理"中提交审核
- 填写审核信息

### 3. 发布
- 审核通过后，点击"发布"按钮
- 小程序即可正式上线

## 五、常见问题

### Q1: 云开发初始化失败
**A:** 检查是否已开通云开发，环境ID是否正确

### Q2: 文件上传失败
**A:** 
- 检查云存储权限设置
- 检查文件大小是否超限（建议视频<50MB，音频<20MB）
- 在真机上测试（模拟器可能不支持）

### Q3: 数据库操作失败
**A:**
- 检查数据库集合名称是否为 `homework`
- 检查数据库权限设置
- 检查网络连接

### Q4: 图标不显示
**A:**
- 检查 `images/` 目录下是否有对应图标文件
- 检查 `app.json` 中的图标路径是否正确

### Q5: 页面空白或报错
**A:**
- 检查控制台错误信息
- 确认所有页面文件都已创建
- 检查 `app.json` 中的页面路径是否正确

## 六、注意事项

1. **权限设置**：根据实际需求调整数据库和云存储权限
2. **文件大小**：注意微信小程序对文件大小的限制
3. **云开发配额**：免费版有配额限制，注意使用量
4. **真机测试**：部分功能必须在真机上测试
5. **审核要求**：确保小程序内容符合微信审核规范

## 七、技术支持

- [微信小程序官方文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [微信云开发文档](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)
- [微信开发者社区](https://developers.weixin.qq.com/community/)

