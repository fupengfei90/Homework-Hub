<!--pages/index/index.wxml-->
<view class="container">
  <!-- å­¦ç§‘ç­›é€‰æ  -->
  <view class="filter-bar">
    <scroll-view class="filter-scroll" scroll-x="true">
      <view class="filter-item {{selectedSubject === item ? 'active' : ''}}"
            wx:for="{{subjects}}" 
            wx:key="index"
            data-subject="{{item}}"
            bindtap="onSubjectChange">
        {{item}}
      </view>
    </scroll-view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:elif="{{isEmpty}}">
    <view class="empty-icon">ğŸ“</view>
    <text>æš‚æ— ä½œä¸š</text>
    <text class="empty-hint">ç‚¹å‡»ä¸‹æ–¹"å‘å¸ƒä½œä¸š"å¼€å§‹ä½¿ç”¨</text>
  </view>

  <!-- ä½œä¸šåˆ—è¡¨ -->
  <view class="homework-list" wx:else>
    <view class="card homework-item" 
          wx:for="{{filteredList}}" 
          wx:key="_id"
          data-id="{{item._id}}"
          bindtap="viewDetail">
      
      <!-- ä½œä¸šæ ‡é¢˜å’Œå­¦ç§‘ -->
      <view class="homework-header">
        <view class="homework-title">{{item.title}}</view>
        <view class="tag tag-subject">{{item.subject}}</view>
      </view>

      <!-- ä½œä¸šå†…å®¹é¢„è§ˆ -->
      <view class="homework-content">
        <text class="content-text">{{item.content}}</text>
      </view>

      <!-- åª’ä½“æ–‡ä»¶æç¤º -->
      <view class="media-hint" wx:if="{{item.videoUrl || item.audioUrl}}">
        <text class="icon">ğŸ“</text>
        <text wx:if="{{item.videoUrl}}">è§†é¢‘</text>
        <text wx:if="{{item.audioUrl}}">éŸ³é¢‘</text>
      </view>

      <!-- æ—¶é—´å’Œæ“ä½œ -->
      <view class="homework-footer">
        <text class="time-text">{{item.createTime}}</text>
        <view class="delete-btn" 
              data-id="{{item._id}}"
              catchtap="deleteHomework">
          åˆ é™¤
        </view>
      </view>
    </view>
  </view>
</view>

